/*!
 * baidu-map-track-render-vue v1.0.10
 * phphe <phphe@outlook.com> (https://github.com/phphe)
 * https://github.com/phphe/baidu-map-track-render-vue.git
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.BaiduMapTrackRender=n()}(this,function(){"use strict";function t(){return new Promise(function(t,n){document&&"complete"===document.readyState?t():window.addEventListener("load",function n(){t(),window.removeEventListener("load",n)})})}function n(t,n){t[n]=void 0;try{delete t[n]}catch(t){}}function e(r){if(window.BMap)return Promise.resolve(window.BMap);var o=e;return t().then(function(){if(o.loaded)return window.BMap;if(!o.requested){o.requested=!0,window._BaiduMapLoadedCallback=function(){o.loaded=!0,n(window,"_BaiduMapLoadedCallback")};var t=document.createElement("script");return t.src="http://api.map.baidu.com/api?v=2.0&ak="+r+"&callback=_BaiduMapLoadedCallback",document.body.appendChild(t),new Promise(function(t,n){var e=window.setInterval(function(){o.loaded&&(window.clearInterval(e),t(window.BMap))},10)})}})}return{render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"baidu-map-track-render-vue"},[e("div",{staticClass:"baidu-map-track-render-vue__map",attrs:{id:t.id}})])},staticRenderFns:[],props:{points:{},ak:{},coordinateConversionLimit:{default:10}},data:function(){return{id:"BaiduMap_"+this._uid}},mounted:function(){var t=this;this.$nextTick(function(){e(t.ak).then(function(n){t.points&&t.ready(n,t.points)})})},methods:{ready:function(t,n){var e=this;this.convertPoints(n,t).then(function(n){var r=n.points,o=new t.Map(e.id),a=e.getCenter(r,t);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var d=r[i-1];if(d){var l=r[i],u=new t.Polyline([d,l],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})},getCenter:function(t,n){var e=t[0].lng,r=t[0].lat,o=t[0].lng,a=t[0].lat,i=!0,d=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;s.lng<o&&(o=s.lng),s.lng>e&&(e=s.lng),s.lat<a&&(a=s.lat),s.lat>r&&(r=s.lat)}}catch(t){d=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(d)throw l}}return new n.Point((e+o)/2,(r+a)/2)},convertPoints:function(t,n){for(var e=new n.Convertor,r=t.map(function(t){return new n.Point(t.lng,t.lat)}),o=[],a=this.coordinateConversionLimit;r.length>0;)o.push(new Promise(function(t,n){e.translate(r.splice(0,a),1,5,function(n){t(n)})}));return Promise.all(o).then(function(t){var n=[],e=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var d=a.value,l=!0,u=!1,c=void 0;try{for(var s,f=d.points[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var v=s.value;n.push(v)}}catch(t){u=!0,c=t}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}}}catch(t){r=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}return{points:n,dataArr:t}})}}}});
//# sourceMappingURL=BaiduMapTrackRender.min.js.map