/*!
 * baidu-map-track-render-vue v1.0.8
 * phphe <phphe@outlook.com> (https://github.com/phphe)
 * https://github.com/phphe/baidu-map-track-render-vue.git
 * Released under the MIT License.
 */

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.BaiduMapTrackRender=t()}(this,function(){"use strict";function n(){return new Promise(function(n,t){document&&"complete"===document.readyState?n():window.addEventListener("load",function t(){n(),window.removeEventListener("load",t)})})}function t(n,t){n[t]=void 0;try{delete n[t]}catch(n){}}function e(r){if(window.BMap)return Promise.resolve(window.BMap);var o=e;return n().then(function(){if(o.loaded)return window.BMap;if(!o.requested){o.requested=!0,window._BaiduMapLoadedCallback=function(){o.loaded=!0,t(window,"_BaiduMapLoadedCallback")};var n=document.createElement("script");return n.src="http://api.map.baidu.com/api?v=2.0&ak="+r+"&callback=_BaiduMapLoadedCallback",document.body.appendChild(n),new Promise(function(n,t){var e=window.setInterval(function(){o.loaded&&(window.clearInterval(e),n(window.BMap))},10)})}})}return{render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"baidu-map-track-render-vue"},[e("div",{staticClass:"baidu-map-track-render-vue__map",attrs:{id:n.id}})])},staticRenderFns:[],props:{points:{},ak:{},coordinateConversionLimit:{default:10}},data:function(){return{id:"BaiduMap_"+this._uid}},mounted:function(){var n=this;this.$nextTick(function(){e(n.ak).then(function(t){n.points&&n.convertPoints(n.points,t).then(function(e){var r=e.points,o=new t.Map(n.id),a=n.getCenter(r,t);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var d=r[i-1];if(d){var l=r[i],u=new t.Polyline([d,l],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})})})},methods:{getCenter:function(n,t){var e=n[0].lng,r=n[0].lat,o=n[0].lng,a=n[0].lat,i=!0,d=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;s.lng<o&&(o=s.lng),s.lng>e&&(e=s.lng),s.lat<a&&(a=s.lat),s.lat>r&&(r=s.lat)}}catch(n){d=!0,l=n}finally{try{!i&&c.return&&c.return()}finally{if(d)throw l}}return new t.Point((e+o)/2,(r+a)/2)},convertPoints:function(n,t){for(var e=new t.Convertor,r=n.map(function(n){return new t.Point(n.lng,n.lat)}),o=[],a=this.coordinateConversionLimit;r.length>0;)o.push(new Promise(function(n,t){e.translate(r.splice(0,a),1,5,function(t){n(t)})}));return Promise.all(o).then(function(n){var t=[],e=!0,r=!1,o=void 0;try{for(var a,i=n[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var d=a.value,l=!0,u=!1,c=void 0;try{for(var s,f=d.points[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var v=s.value;t.push(v)}}catch(n){u=!0,c=n}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}}}catch(n){r=!0,o=n}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}return{points:t,dataArr:n}})}}}});
//# sourceMappingURL=BaiduMapTrackRender.min.js.map