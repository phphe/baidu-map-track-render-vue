/*!
 * baidu-map-track-render-vue v1.0.0
 * phphe <phphe@outlook.com> (https://github.com/phphe)
 * https://github.com/phphe/baidu-map-vue.git
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.BaiduMapTrackRender=n()}(this,function(){"use strict";function t(){return new Promise(function(t,n){document&&"complete"===document.readyState?t():window.addEventListener("load",function n(){t(),window.removeEventListener("load",n)})})}function n(t,n){t[n]=void 0;try{delete t[n]}catch(t){}}function e(r){var o=e;return t().then(function(){if(o.loaded)return window.BMap;if(!o.requested){o.requested=!0,window._BaiduMapLoadedCallback=function(){o.loaded=!0,n(window,"_BaiduMapLoadedCallback")};var t=document.createElement("script");return t.src="http://api.map.baidu.com/api?v=2.0&ak="+r+"&callback=_BaiduMapLoadedCallback",document.body.appendChild(t),new Promise(function(t,n){var e=window.setInterval(function(){o.loaded&&(window.clearInterval(e),t(window.BMap))},10)})}})}return{render:function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{staticClass:"baidu-map baidu-map-vue",attrs:{id:t.id}})},staticRenderFns:[],props:{points:{},ak:{}},data:function(){return{id:"BaiduMap_"+this._uid}},mounted:function(){var t=this;this.$nextTick(function(){e(t.ak).then(function(n){t.points&&t.convertPoints(t.points,n).then(function(e){var r=e.points,o=new n.Map(t.id),a=t.getCenter(r,n);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var l=r[i-1];if(l){var d=r[i],u=new n.Polyline([l,d],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})})})},methods:{mapReady:function(t){var n=this;this.points&&this.convertPoints(this.points,t).then(function(e){var r=e.points,o=new t.Map("map"),a=n.getCenter(r,t);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var l=r[i-1];if(l){var d=r[i],u=new t.Polyline([l,d],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})},getCenter:function(t,n){var e=t[0].lng,r=t[0].lat,o=t[0].lng,a=t[0].lat,i=!0,l=!1,d=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;f.lng<o&&(o=f.lng),f.lng>e&&(e=f.lng),f.lat<a&&(a=f.lat),f.lat>r&&(r=f.lat)}}catch(t){l=!0,d=t}finally{try{!i&&c.return&&c.return()}finally{if(l)throw d}}return new n.Point((e+o)/2,(r+a)/2)},convertPoints:function(t,n){var e=new n.Convertor,r=[],o=!0,a=!1,i=void 0;try{for(var l,d=t[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var u=l.value;r.push(new n.Point(u[0],u[1]))}}catch(t){a=!0,i=t}finally{try{!o&&d.return&&d.return()}finally{if(a)throw i}}for(var c=[],f=0,s=0;s<t.length;f++,s+=100)!function(t,n){c.push(new Promise(function(n,o){var a=100*t,i=a+100;e.translate(r.slice(a,i),1,5,function(t){n(t)})}))}(f);return Promise.all(c).then(function(t){var n=[],e=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var l=a.value,d=!0,u=!1,c=void 0;try{for(var f,s=l.points[Symbol.iterator]();!(d=(f=s.next()).done);d=!0){var v=f.value;n.push(v)}}catch(t){u=!0,c=t}finally{try{!d&&s.return&&s.return()}finally{if(u)throw c}}}}catch(t){r=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}return{points:n,dataArr:t}})}}}});
//# sourceMappingURL=BaiduMapTrackRender.min.js.map