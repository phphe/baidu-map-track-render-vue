/*!
 * baidu-map-track-render-vue v1.0.3
 * phphe <phphe@outlook.com> (https://github.com/phphe)
 * https://github.com/phphe/baidu-map-track-render-vue.git
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.BaiduMapTrackRender=n()}(this,function(){"use strict";function t(){return new Promise(function(t,n){document&&"complete"===document.readyState?t():window.addEventListener("load",function n(){t(),window.removeEventListener("load",n)})})}function n(t,n){t[n]=void 0;try{delete t[n]}catch(t){}}function e(r){var a=e;return t().then(function(){if(a.loaded)return window.BMap;if(!a.requested){a.requested=!0,window._BaiduMapLoadedCallback=function(){a.loaded=!0,n(window,"_BaiduMapLoadedCallback")};var t=document.createElement("script");return t.src="http://api.map.baidu.com/api?v=2.0&ak="+r+"&callback=_BaiduMapLoadedCallback",document.body.appendChild(t),new Promise(function(t,n){var e=window.setInterval(function(){a.loaded&&(window.clearInterval(e),t(window.BMap))},10)})}})}return{render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"baidu-map-track-render-vue"},[e("div",{staticClass:"baidu-map-track-render-vue__map",attrs:{id:t.id}})])},staticRenderFns:[],props:{points:{},ak:{}},data:function(){return{id:"BaiduMap_"+this._uid}},mounted:function(){var t=this;this.$nextTick(function(){e(t.ak).then(function(n){t.points&&t.convertPoints(t.points,n).then(function(e){var r=e.points,a=new n.Map(t.id),o=t.getCenter(r,n);a.centerAndZoom(o,15),a.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var d=r[i-1];if(d){var l=r[i],u=new n.Polyline([d,l],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});a.addOverlay(u)}}})})})},methods:{getCenter:function(t,n){var e=t[0].lng,r=t[0].lat,a=t[0].lng,o=t[0].lat,i=!0,d=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;f.lng<a&&(a=f.lng),f.lng>e&&(e=f.lng),f.lat<o&&(o=f.lat),f.lat>r&&(r=f.lat)}}catch(t){d=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(d)throw l}}return new n.Point((e+a)/2,(r+o)/2)},convertPoints:function(t,n){var e=new n.Convertor,r=[],a=!0,o=!1,i=void 0;try{for(var d,l=t[Symbol.iterator]();!(a=(d=l.next()).done);a=!0){var u=d.value;r.push(new n.Point(u[0],u[1]))}}catch(t){o=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}for(var c=[],f=0,s=0;s<t.length;f++,s+=100)!function(t,n){c.push(new Promise(function(n,a){var o=100*t,i=o+100;e.translate(r.slice(o,i),1,5,function(t){n(t)})}))}(f);return Promise.all(c).then(function(t){var n=[],e=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var d=o.value,l=!0,u=!1,c=void 0;try{for(var f,s=d.points[Symbol.iterator]();!(l=(f=s.next()).done);l=!0){var v=f.value;n.push(v)}}catch(t){u=!0,c=t}finally{try{!l&&s.return&&s.return()}finally{if(u)throw c}}}}catch(t){r=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw a}}return{points:n,dataArr:t}})}}}});
//# sourceMappingURL=BaiduMapTrackRender.min.js.map