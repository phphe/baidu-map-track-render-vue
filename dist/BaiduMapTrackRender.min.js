/*!
 * baidu-map-track-render-vue v1.0.0
 * phphe <phphe@outlook.com> (https://github.com/phphe)
 * https://github.com/phphe/baidu-map-track-render-vue.git
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.BaiduMapTrackRender=e()}(this,function(){"use strict";function t(){return new Promise(function(t,e){document&&"complete"===document.readyState?t():window.addEventListener("load",function e(){t(),window.removeEventListener("load",e)})})}function e(t,e){t[e]=void 0;try{delete t[e]}catch(t){}}function n(r){var o=n;return t().then(function(){if(o.loaded)return window.BMap;if(!o.requested){o.requested=!0,window._BaiduMapLoadedCallback=function(){o.loaded=!0,e(window,"_BaiduMapLoadedCallback")};var t=document.createElement("script");return t.src="http://api.map.baidu.com/api?v=2.0&ak="+r+"&callback=_BaiduMapLoadedCallback",document.body.appendChild(t),new Promise(function(t,e){var n=window.setInterval(function(){o.loaded&&(window.clearInterval(n),t(window.BMap))},10)})}})}return{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"baidu-map-track-render-vue"},[n("div",{staticClass:"baidu-map-track-render-vue__map",attrs:{id:t.id}})])},staticRenderFns:[],props:{points:{},ak:{}},data:function(){return{id:"BaiduMap_"+this._uid}},mounted:function(){var t=this;this.$nextTick(function(){n(t.ak).then(function(e){t.points&&t.convertPoints(t.points,e).then(function(n){var r=n.points,o=new e.Map(t.id),a=t.getCenter(r,e);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var l=r[i-1];if(l){var d=r[i],u=new e.Polyline([l,d],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})})})},methods:{mapReady:function(t){var e=this;this.points&&this.convertPoints(this.points,t).then(function(n){var r=n.points,o=new t.Map("map"),a=e.getCenter(r,t);o.centerAndZoom(a,15),o.enableScrollWheelZoom();for(var i=0;i<r.length;i++){var l=r[i-1];if(l){var d=r[i],u=new t.Polyline([l,d],{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5});o.addOverlay(u)}}})},getCenter:function(t,e){var n=t[0].lng,r=t[0].lat,o=t[0].lng,a=t[0].lat,i=!0,l=!1,d=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;s.lng<o&&(o=s.lng),s.lng>n&&(n=s.lng),s.lat<a&&(a=s.lat),s.lat>r&&(r=s.lat)}}catch(t){l=!0,d=t}finally{try{!i&&c.return&&c.return()}finally{if(l)throw d}}return new e.Point((n+o)/2,(r+a)/2)},convertPoints:function(t,e){var n=new e.Convertor,r=[],o=!0,a=!1,i=void 0;try{for(var l,d=t[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var u=l.value;r.push(new e.Point(u[0],u[1]))}}catch(t){a=!0,i=t}finally{try{!o&&d.return&&d.return()}finally{if(a)throw i}}for(var c=[],s=0,f=0;f<t.length;s++,f+=100)!function(t,e){c.push(new Promise(function(e,o){var a=100*t,i=a+100;n.translate(r.slice(a,i),1,5,function(t){e(t)})}))}(s);return Promise.all(c).then(function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,d=!0,u=!1,c=void 0;try{for(var s,f=l.points[Symbol.iterator]();!(d=(s=f.next()).done);d=!0){var v=s.value;e.push(v)}}catch(t){u=!0,c=t}finally{try{!d&&f.return&&f.return()}finally{if(u)throw c}}}}catch(t){r=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return{points:e,dataArr:t}})}}}});
//# sourceMappingURL=BaiduMapTrackRender.min.js.map